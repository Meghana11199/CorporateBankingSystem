<div class="create-credit-page">

  <!-- ===== HEADER ===== -->
  <header class="rm-header">
    <div class="bank-brand">
      <span class="bank-logo">ğŸ¦</span>
      <h2>CBS BANK</h2>
    </div>

    <div class="header-right">
      <span class="rm-role">RM</span>
      <!-- IMPORTANT: type="button" -->
      <button
        mat-raised-button
        type="button"
        class="logout-btn"
        (click)="logout()"
      >
        Logout
      </button>
    </div>
  </header>

 
  <!-- ===== FORM ===== -->
  <form
    class="credit-form"
    [formGroup]="creditForm"
    (ngSubmit)="submit()"
    novalidate
  >
      <div class="body-actions">
  <button
    mat-stroked-button
    color="primary"
    class="back-btn"
    routerLink="/rm/dashboard">
    â† Back to Dashboard
  </button>
</div>
    <h2 class="form-title">Create Credit Request</h2>

    <!-- Client -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Client</mat-label>
      <mat-select formControlName="clientId">
        <mat-option *ngFor="let c of clients" [value]="c.id">
          {{ c.companyName }}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="creditForm.get('clientId')?.hasError('required')">
        Client is required
      </mat-error>
    </mat-form-field>

    <!-- Credit Type -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Credit Type</mat-label>
      <mat-select formControlName="creditType">
        <mat-option *ngFor="let type of creditTypes" [value]="type">
          {{ type }}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="creditForm.get('creditType')?.hasError('required')">
        Credit type is required
      </mat-error>
    </mat-form-field>

    <!-- Amount -->
  <mat-form-field appearance="outline" class="full-width">
  <mat-label>Amount</mat-label>
  <input matInput type="number" formControlName="requestedAmount" />
</mat-form-field>

    <!-- Tenure -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Tenure (Months)</mat-label>
      <input matInput type="number" formControlName="tenureMonths" />
      <mat-error *ngIf="creditForm.get('tenureMonths')?.hasError('required')">
        Tenure is required
      </mat-error>
      <mat-error *ngIf="creditForm.get('tenureMonths')?.hasError('min')">
        Tenure must be greater than 0
      </mat-error>
    </mat-form-field>
    <mat-form-field appearance="outline" class="full-width">
  <mat-label>Purpose</mat-label>
  <input matInput type="text" formControlName="purpose" />
</mat-form-field>


    <!-- Submit -->
    <button
      mat-raised-button
      color="primary"
      class="submit-btn"
      type="submit"
      [disabled]="creditForm.invalid || loading"
    >
      {{ loading ? 'Submitting...' : 'Submit Credit Request' }}
    </button>

    <!-- Messages -->
    <p class="success-msg" *ngIf="successMsg">{{ successMsg }}</p>
    <p class="error-msg" *ngIf="errorMsg">{{ errorMsg }}</p>

  </form>

  <!-- ===== FOOTER ===== -->
  <footer class="page-footer">
    Â© 2026 CBS BANK. Secure RM Portal.
  </footer>

</div>
